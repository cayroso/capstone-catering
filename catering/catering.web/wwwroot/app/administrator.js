!function(e){function t(t){for(var s,a,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)a=i[d],r[a]&&m.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(s=!1)}s&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},r={1:0},o=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/app/";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([153,0]),n()}({131:function(e,t,n){var s={"./af":3,"./af.js":3,"./ar":4,"./ar-dz":5,"./ar-dz.js":5,"./ar-kw":6,"./ar-kw.js":6,"./ar-ly":7,"./ar-ly.js":7,"./ar-ma":8,"./ar-ma.js":8,"./ar-sa":9,"./ar-sa.js":9,"./ar-tn":10,"./ar-tn.js":10,"./ar.js":4,"./az":11,"./az.js":11,"./be":12,"./be.js":12,"./bg":13,"./bg.js":13,"./bm":14,"./bm.js":14,"./bn":15,"./bn.js":15,"./bo":16,"./bo.js":16,"./br":17,"./br.js":17,"./bs":18,"./bs.js":18,"./ca":19,"./ca.js":19,"./cs":20,"./cs.js":20,"./cv":21,"./cv.js":21,"./cy":22,"./cy.js":22,"./da":23,"./da.js":23,"./de":24,"./de-at":25,"./de-at.js":25,"./de-ch":26,"./de-ch.js":26,"./de.js":24,"./dv":27,"./dv.js":27,"./el":28,"./el.js":28,"./en-SG":29,"./en-SG.js":29,"./en-au":30,"./en-au.js":30,"./en-ca":31,"./en-ca.js":31,"./en-gb":32,"./en-gb.js":32,"./en-ie":33,"./en-ie.js":33,"./en-il":34,"./en-il.js":34,"./en-nz":35,"./en-nz.js":35,"./eo":36,"./eo.js":36,"./es":37,"./es-do":38,"./es-do.js":38,"./es-us":39,"./es-us.js":39,"./es.js":37,"./et":40,"./et.js":40,"./eu":41,"./eu.js":41,"./fa":42,"./fa.js":42,"./fi":43,"./fi.js":43,"./fo":44,"./fo.js":44,"./fr":45,"./fr-ca":46,"./fr-ca.js":46,"./fr-ch":47,"./fr-ch.js":47,"./fr.js":45,"./fy":48,"./fy.js":48,"./ga":49,"./ga.js":49,"./gd":50,"./gd.js":50,"./gl":51,"./gl.js":51,"./gom-latn":52,"./gom-latn.js":52,"./gu":53,"./gu.js":53,"./he":54,"./he.js":54,"./hi":55,"./hi.js":55,"./hr":56,"./hr.js":56,"./hu":57,"./hu.js":57,"./hy-am":58,"./hy-am.js":58,"./id":59,"./id.js":59,"./is":60,"./is.js":60,"./it":61,"./it-ch":62,"./it-ch.js":62,"./it.js":61,"./ja":63,"./ja.js":63,"./jv":64,"./jv.js":64,"./ka":65,"./ka.js":65,"./kk":66,"./kk.js":66,"./km":67,"./km.js":67,"./kn":68,"./kn.js":68,"./ko":69,"./ko.js":69,"./ku":70,"./ku.js":70,"./ky":71,"./ky.js":71,"./lb":72,"./lb.js":72,"./lo":73,"./lo.js":73,"./lt":74,"./lt.js":74,"./lv":75,"./lv.js":75,"./me":76,"./me.js":76,"./mi":77,"./mi.js":77,"./mk":78,"./mk.js":78,"./ml":79,"./ml.js":79,"./mn":80,"./mn.js":80,"./mr":81,"./mr.js":81,"./ms":82,"./ms-my":83,"./ms-my.js":83,"./ms.js":82,"./mt":84,"./mt.js":84,"./my":85,"./my.js":85,"./nb":86,"./nb.js":86,"./ne":87,"./ne.js":87,"./nl":88,"./nl-be":89,"./nl-be.js":89,"./nl.js":88,"./nn":90,"./nn.js":90,"./pa-in":91,"./pa-in.js":91,"./pl":92,"./pl.js":92,"./pt":93,"./pt-br":94,"./pt-br.js":94,"./pt.js":93,"./ro":95,"./ro.js":95,"./ru":96,"./ru.js":96,"./sd":97,"./sd.js":97,"./se":98,"./se.js":98,"./si":99,"./si.js":99,"./sk":100,"./sk.js":100,"./sl":101,"./sl.js":101,"./sq":102,"./sq.js":102,"./sr":103,"./sr-cyrl":104,"./sr-cyrl.js":104,"./sr.js":103,"./ss":105,"./ss.js":105,"./sv":106,"./sv.js":106,"./sw":107,"./sw.js":107,"./ta":108,"./ta.js":108,"./te":109,"./te.js":109,"./tet":110,"./tet.js":110,"./tg":111,"./tg.js":111,"./th":112,"./th.js":112,"./tl-ph":113,"./tl-ph.js":113,"./tlh":114,"./tlh.js":114,"./tr":115,"./tr.js":115,"./tzl":116,"./tzl.js":116,"./tzm":117,"./tzm-latn":118,"./tzm-latn.js":118,"./tzm.js":117,"./ug-cn":119,"./ug-cn.js":119,"./uk":120,"./uk.js":120,"./ur":121,"./ur.js":121,"./uz":122,"./uz-latn":123,"./uz-latn.js":123,"./uz.js":122,"./vi":124,"./vi.js":124,"./x-pseudo":125,"./x-pseudo.js":125,"./yo":126,"./yo.js":126,"./zh-cn":127,"./zh-cn.js":127,"./zh-hk":128,"./zh-hk.js":128,"./zh-tw":129,"./zh-tw.js":129};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=o,e.exports=r,r.id=131},151:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);n(151);var s=n(1),r=n.n(s),o=(n(130),n(132),n(134),n(152),n(2)),a=n.n(o);n(135);const i=a.a.module("app",[n(136),n(137),"ui.bootstrap"]);function c(){const e=this,t="app/clientapp/administrator/templates/";e.page=`${t}/reservations.html`,e.setPage=function(n,s){e.page=`${t}/${n}`,s.preventDefault()}}c.$inject=[],i.controller("mainController",c);var l=i,u=n(0),d=n.n(u);function m(e,t){const n=this;n.init=function(){e.get("api/administrator/dashboard").then(function(e){n.data=e.data;for(let t=0;t<n.data.upcoming.length;t++){let n=e.data.upcoming[t];n.fromNow=d()(n.dateStart).fromNow()}for(let t=0;t<n.data.overdue.length;t++){let n=e.data.overdue[t];n.toNow=d()(n.dateStart).fromNow()}var t=[],s=[],o=[],a=[],i=d()();for(let n=0;n<e.data.reservations.length;n++){let r=e.data.reservations[n];var c={title:r.title,start:d()(r.dateStart),end:d()(r.dateEnd)};c.end<i?t.push(c):4===r.reservationStatus?o.push(c):5===r.reservationStatus?a.push(c):s.push(c)}r()("#calendar").fullCalendar({header:{center:"month,agendaWeek"},defaultView:"month",eventSources:[{events:t,color:"red"},{events:s,color:"green"},{events:o,color:"blue"},{events:a,color:"black"}]})},function(e){t.error("error occured")})},n.init()}function p(e,t,n){const s=this;s.selectedItem=null,s.setSelectedItem=function(e){e!==s.selectedItem&&(s.selectedItem=e)},s.viewReservation=function(){t.open({animation:!0,templateUrl:"modalViewReservation.html",controller:"viewReservationModalController",size:"lg",resolve:{reservation:function(){return s.selectedItem}}})},s.completeReservation=function(){e.post(`api/administrator/reservations/${s.selectedItem.reservationId}/complete`).then(function(e){n.success("Reservation was set to complete"),s.init()},function(e){n.success("Error Occured")})},s.cancelReservation=function(){e.post(`api/administrator/reservations/${s.selectedItem.reservationId}/cancel`).then(function(e){n.success("Reservation was set to Cancelled"),s.init()},function(e){n.success("Error Occured")})},s.acceptPayment=function(){e.post(`api/administrator/reservations/${s.selectedItem.reservationId}/accept-payment`).then(function(e){n.success("Reservation payment was accepted"),s.init()},function(e){n.success("Error Occured")})},s.rejectPayment=function(){e.post(`api/administrator/reservations/${s.selectedItem.reservationId}/reject-payment`).then(function(e){n.success("Reservation payment was rejected"),s.init()},function(e){n.success("Error Occured")})},s.init=function(){e.get("api/administrator/reservations").then(function(e){s.items=e.data;for(var t=0;t<s.items.length;t++){var n=s.items[t];n.toNow=d()(n.dateStart).fromNow(),0===n.reservationStatus&&(n.reservationStatusText="Pending"),1===n.reservationStatus&&(n.reservationStatusText="Payment Sent"),2===n.reservationStatus&&(n.reservationStatusText="Payment Accepted"),3===n.reservationStatus&&(n.reservationStatusText="Payment Rejected"),4===n.reservationStatus&&(n.reservationStatusText="Complete"),5===n.reservationStatus&&(n.reservationStatusText="Cancelled")}},function(e){n.error("Error occured")})},s.init()}function f(e,t,n,s){e.reservation=angular.copy(s),e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}function j(e,t){const n=this;n.selectedItem=null,n.setSelectedItem=function(e){e!==n.selectedItem?n.selectedItem=e:n.selectedItem=null},n.init=function(){e.get("api/administrator/customers").then(function(e){n.items=e.data},function(e){t.error("Error occured")})},n.init()}function g(e,t,n){const s=this;s.selectedItem=null,s.setSelectedItem=function(e){e!==s.selectedItem?s.selectedItem=e:s.selectedItem=null},s.dlgOpenAddPackageItem=function(e){t.open({animation:!0,templateUrl:"modalAddPackageItem.html",controller:"ModalAddPackageItemInstanceCtrl",size:"lg",backdrop:"static",resolve:{packageId:function(){return e.packageId}}}).result.then(function(e){s.init()})},s.dlgOpenEditPackageItem=function(e){t.open({animation:!0,templateUrl:"modalEditPackageItem.html",controller:"ModalEditPackageItemInstanceCtrl",size:"lg",backdrop:"static",resolve:{pkg:function(){return e}}}).result.then(function(e){s.init()})},s.dlgOpenAddPackageItemImage=function(e){t.open({animation:!0,templateUrl:"modalAddPackageItemImage.html",controller:"ModalAddPackageItemImageInstanceCtrl",size:"lg",resolve:{packageItem:function(){return e}}}).result.then(function(e){s.init()})},s.removePackageItem=function(t){e.post(`api/administrator/packages/item/${t.packageImageId}/remove`).then(function(e){s.init(),n.success("Package Item removed")},function(e){n.error("error occured")})},s.init=function(){e.get("api/administrator/packages").then(function(e){s.items=e.data},function(e){n.error("Error occured")})},s.init()}function v(e,t,n,s,r){e.packageItem={packageId:r,name:"",description:""},e.ok=function(){t.post("api/administrator/packages/itemAdd",e.packageItem).then(function(t){s.success("Package Item saved","Add Item",{timeOut:0,onHidden:function(){n.close(e.package)}})},function(e){s.error("Error occured")})},e.cancel=function(){n.dismiss("cancel")}}function h(e,t,n,s,r){e.packageItem=angular.copy(r),e.ok=function(){t.post("api/administrator/packages/itemEdit",e.packageItem).then(function(t){s.success("Package Item Updated","Edit",{timeOut:0,onHidden:function(){n.close(e.package)}})},function(e){s.error("Error occured")})},e.cancel=function(){n.dismiss("cancel")}}function k(e,t,n,s,o){e.isDone=!1,e.packageItem=o,e.ok=function(){var o=r()("#fileProgress")[0];angular.element(document).find("#lblMessage");o.style.display="block";var a=new FormData;a.append("file",document.getElementById("file").files[0]),t({method:"POST",url:`api/administrator/packages/item/${e.packageItem.packageImageId}/image`,data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0},uploadEventHandlers:{progress:function(e){e.lengthComputable&&(o.setAttribute("value",e.loaded),o.setAttribute("max",e.total))}}}).then(function(t,r){e.isDone=!0,s.success("Image has been uploaded.","Image Uploaded",{timeOut:0,onHidden:function(){n.close()}})},function(e,t){s.error(e.Message,"Error",{timeOut:0})})},e.cancel=function(){n.dismiss("cancel")},e.close=function(){n.close()}}function I(e,t){const n=this;n.selectedItem=null,n.setSelectedItem=function(e){e!==n.selectedItem&&(n.selectedItem=e)},n.resend=function(s){e.post(`api/message/resend/${s}`).then(function(e){t.success("Message ready to be send","Resend",{timeOut:0,onHidden:function(){n.init()}})},function(e){t.error("Error occured","Resend",{timeOut:0})})},n.markAsSent=function(s){e.post(`api/message/sent/?id=${s}`).then(function(e){t.success("Message marked as Sent","Mark As Sent",{timeOut:0,onHidden:function(){n.init()}})},function(e){t.error("Error occured","Resend",{timeOut:0})})},n.init=function(){e.get("api/message").then(function(e){n.items=e.data},function(e){t.error("Error occured")})},n.init()}function b(e,t){const n=this;n.onEdit=!1,n.edit=function(){n.onEdit=!0},n.save=function(){e.post("api/reservations/pricing",n.item).then(function(e){t.success("Pricing updated","Pricing",{timeOut:0,onHidden:function(){n.onEdit=!1,n.init()}})},function(e){t.error("Error occured","Pricing",{timeOut:0})})},n.init=function(){e.get("api/reservations/pricing").then(function(e){n.item=e.data},function(e){t.error("Error occured")})},n.init()}m.$inject=["$http","toastr"],l.controller("dashboardController",m),p.$inject=["$http","$uibModal","toastr"],l.controller("reservationsController",p),f.$inject=["$scope","$uibModalInstance","toastr","reservation"],l.controller("viewReservationModalController",f),j.$inject=["$http","toastr"],l.controller("customersController",j),g.$inject=["$http","$uibModal","toastr"],l.controller("packagesController",g),v.$inject=["$scope","$http","$uibModalInstance","toastr","packageId"],l.controller("ModalAddPackageItemInstanceCtrl",v),h.$inject=["$scope","$http","$uibModalInstance","toastr","pkg"],l.controller("ModalEditPackageItemInstanceCtrl",h),k.$inject=["$scope","$http","$uibModalInstance","toastr","packageItem"],l.controller("ModalAddPackageItemImageInstanceCtrl",k),I.$inject=["$http","toastr"],l.controller("messagesController",I),b.$inject=["$http","toastr"],l.controller("pricingController",b)}});